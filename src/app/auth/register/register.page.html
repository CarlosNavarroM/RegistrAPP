<ion-header>
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-back-button text="Volver" defaultHref="/"></ion-back-button>
        </ion-buttons>
        <ion-title>Registro</ion-title>
    </ion-toolbar>
</ion-header>

<ion-content>
    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
        <div class="register-container">
            <!------------- Nombre -------------->
            <ion-item lines="none" class="animate-animated animate__fadeInDown">
                <ion-label position="floating">Nombre</ion-label>
                <ion-input type="text" formControlName="name"></ion-input>
            </ion-item>

            <ion-text color="danger" *ngIf="registerForm.get('name')?.touched && registerForm.get('name')?.invalid">
                <small *ngIf="registerForm.get('name')?.errors?.['required']">El nombre es requerido</small>
            </ion-text>
            
            <!------------- Correo Electronico -------------->
            <ion-item lines="none" class="animate-animated animate__fadeInDown">
                <ion-label position="floating">Correo</ion-label>
                <ion-input type="email" formControlName="email"></ion-input>
            </ion-item>

            <ion-text color="danger" *ngIf="registerForm.get('email')?.touched && registerForm.get('email')?.invalid">
                <small *ngIf="registerForm.get('email')?.errors?.['required']">El correo es requerido</small>
                <small *ngIf="registerForm.get('email')?.errors?.['email']">El correo no es válido</small>
            </ion-text>

            <!------------- Rut -------------->
            <ion-item lines="none" class="animate-animated animate__fadeInDown">
                <ion-label position="floating">Rut</ion-label>
                <ion-input type="text" formControlName="rut"></ion-input>
            </ion-item>

            <ion-text color="danger" *ngIf="registerForm.get('rut')?.touched && registerForm.get('rut')?.invalid">
                <small *ngIf="registerForm.get('rut')?.errors?.['required']">El rut es requerido</small>
                <small *ngIf="registerForm.get('rut')?.errors?.['minlength']">El rut debe tener almenos 8 caracteres</small>
            </ion-text>
            <!------------- Contraseña -------------->
            <ion-item lines="none" class="animate-animated animate__fadeInDown">
                <ion-label position="floating">Contraseña</ion-label>
                <ion-input type="password" formControlName="password"></ion-input>
            </ion-item>

            <ion-text color="danger" *ngIf="registerForm.get('password')?.touched && registerForm.get('password')?.invalid">
                <small *ngIf="registerForm.get('password')?.errors?.['required']">La contraseña es requerida</small>
                <small *ngIf="registerForm.get('password')?.errors?.['minlength']">La contraseña debe tener al menos 6 caracteres</small>
            </ion-text>

            <!------------- Confirmar Contraseña -------------->
            <ion-item lines="none" class="animate-animated animate__fadeInDown">
                <ion-label position="floating">Confirmar contraseña</ion-label>
                <ion-input type="password" formControlName="confirmPassword"></ion-input>
            </ion-item>

            <ion-text color="danger" *ngIf="registerForm.get('confirmPassword')?.touched && registerForm.get('confirmPassword')?.hasError('required')">
                <small>La confirmación de la contraseña es requerida</small>
            </ion-text>

            <ion-text color="danger" *ngIf="registerForm.get('confirmPassword')?.touched && !registerForm.get('confirmPassword')?.hasError('required') && registerForm.hasError('mismatch')">
                <small>Las contraseñas no coinciden</small>
            </ion-text>

            <!------------- Boton de Registro -------------->
            <ion-button type="submit" expand="block" class="animate-animated animate__fadeInUp animate__delay-2s" type="submit" [disabled]="registerForm.invalid">
                Registrarse
                <ion-icon slot="end" name="person-add-outline"></ion-icon>
            </ion-button>
        </div>
    </form>
</ion-content>
